<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>用户参数修改 - 前端管理</title>
    <link rel="stylesheet" href="/admin/static/styles.css" />
  </head>
  <body class="admin-layout">
    <aside class="admin-sidebar">
  <div class="sidebar-top">
    <div class="sidebar-logo">
      <span class="logo-dot"></span>
      <strong>控制台</strong>
    </div>
    <div class="sidebar-profile">
      <div class="sidebar-avatar" id="sidebar-avatar">A</div>
      <div>
        <p id="admin-name" class="sidebar-name">管理员</p>
        <span class="sidebar-status">在线</span>
      </div>
    </div>
  </div>
  <nav class="admin-nav">
    <a class="nav-item" href="/admin/dashboard">
      <span>控制台</span>
      <small class="nav-tag hot">HOT</small>
    </a>
    <details class="nav-group">
      <summary class="nav-item">
        <span>常规管理</span>
      </summary>
      <div class="nav-sub">
        <a class="nav-sub-item" href="/admin/profile">个人资料</a>
        <a class="nav-sub-item" href="#">栏目配置</a>
        <a class="nav-sub-item" href="#">缓存清理</a>
      </div>
    </details>
    <details class="nav-group">
      <summary class="nav-item">
        <span>信息审核</span>
      </summary>
      <div class="nav-sub">
        <a class="nav-sub-item" href="/admin/attachments">附件审核</a>
        <a class="nav-sub-item" href="/admin/avatar-review">头像审核</a>
        <a class="nav-sub-item" href="/admin/identity-review">身份审核</a>
        <a class="nav-sub-item" href="/admin/confession-review">表白墙审核</a>
      </div>
    </details>
    <details class="nav-group">
      <summary class="nav-item">
        <span>权限管理</span>
      </summary>
      <div class="nav-sub">
        <a class="nav-sub-item" href="/admin/admins">管理员管理</a>
        <a class="nav-sub-item" href="/admin/admin-logs">管理员日志</a>
        <a class="nav-sub-item" href="/admin/roles">角色组</a>
        <a class="nav-sub-item" href="/admin/rules">菜单规则</a>
      </div>
    </details>
    <details class="nav-group">
      <summary class="nav-item">
        <span>即时通信管理</span>
      </summary>
      <div class="nav-sub">
        <a class="nav-sub-item" href="/admin/push">推送消息</a>
        <a class="nav-sub-item" href="/admin/service-accounts">服务账号管理</a>
      </div>
    </details>
    <details class="nav-group">
      <summary class="nav-item">
        <span>会员管理</span>
      </summary>
      <div class="nav-sub">
        <a class="nav-sub-item" href="/admin/members">会员管理</a>
        <a class="nav-sub-item" href="/admin/customer-service">客服管理</a>
      </div>
    </details>
    <details class="nav-group">
      <summary class="nav-item">
        <span>礼物管理</span>
      </summary>
      <div class="nav-sub">
        <a class="nav-sub-item" href="/admin/gift-categories">礼物分类</a>
        <a class="nav-sub-item" href="/admin/gifts">礼物管理</a>
      </div>
    </details>
    <a class="nav-item" href="/admin/stickers">
      <span>表情贴管理</span>
    </a>
    <details class="nav-group">
      <summary class="nav-item">
        <span>订单管理</span>
      </summary>
      <div class="nav-sub">
        <a class="nav-sub-item" href="/admin/order-overview">总营业额</a>
        <a class="nav-sub-item" href="/admin/recharge-records">充值记录</a>
        <a class="nav-sub-item" href="/admin/coin-consumption">金币消费记录</a>
        <a class="nav-sub-item" href="/admin/card-review">点卡审核</a>
      </div>
    </details>
    <details class="nav-group open">
      <summary class="nav-item">
        <span>前端管理</span>
      </summary>
      <div class="nav-sub">
        <a class="nav-sub-item" href="/admin/frontend-terms">使用条款修改</a>
        <a class="nav-sub-item" href="/admin/frontend-privacy">隐私条款修改</a>
        <a class="nav-sub-item" href="/admin/frontend-security">交友安全修改</a>
        <a class="nav-sub-item" href="/admin/frontend-help">帮助中心修改</a>
        <a class="nav-sub-item" href="/admin/frontend-contact">联系我们修改</a>
        <a class="nav-sub-item active" href="/admin/frontend-user-config">用户参数修改</a>
        <a class="nav-sub-item" href="/admin/frontend-card-redeem">点卡兑换内容修改</a>
        <a class="nav-sub-item" href="/admin/frontend-confession-images">表白墙图片修改</a>
      </div>
    </details>

  </nav>
  <button type="button" class="logout-btn" id="logout-btn">退出登录</button>
</aside>
    <main class="admin-main members-compact">
      <header class="admin-topbar">
        <div>
          <h1>用户参数修改</h1>
          <p class="topbar-subtitle">前端内容 - 用户可见参数配置</p>
        </div>
      </header>
      <section class="panel">
        <header class="panel-head">
          <div class="panel-actions" id="uc-actions">
            <button class="panel-btn" id="uc-refresh">刷新</button>
            <button class="panel-btn primary" id="uc-add">+ 新增</button>
            <button class="panel-btn" id="uc-edit">编辑</button>
            <button class="panel-btn danger" id="uc-delete">删除</button>
          </div>
          <div class="panel-extra" style="margin-left:auto;display:flex;gap:8px;align-items:center;">
            <label class="search-box" style="min-width:240px;">
              <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true"><path fill="currentColor" d="M15.5 14h-.79l-.28-.27A6.5 6.5 0 1 0 9.5 16a6.48 6.48 0 0 0 4.23-1.57l.27.28v.79l5 5L20.5 19l-5-5Zm-6 0A4.5 4.5 0 1 1 14 9.5 4.5 4.5 0 0 1 9.5 14Z"/></svg>
              <input type="search" id="uc-search" placeholder="搜索昵称 / 邮箱 / ID" />
            </label>
            <select id="uc-page-size" class="select" style="height:36px;padding:0 8px;">
              <option value="10">10 条/页</option>
              <option value="20">20 条/页</option>
              <option value="50">50 条/页</option>
            </select>
          </div>
        </header>
        <div class="table-wrapper">
          <table class="data-table" id="uc-table">
            <thead>
              <tr>
                <th><input type="checkbox" id="uc-check-all" /></th>
                <th>ID</th>
                <th>昵称</th>
                <th>邮箱</th>
                <th>头像</th>
                <th>性别</th>
                <th>会员等级</th>
                <th>人气值</th>
                <th>幸运星数值</th>
                <th>授权快捷内容</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody>
              <tr><td colspan="11" class="empty">加载中...</td></tr>
            </tbody>
          </table>
        </div>
        <footer class="table-foot">
          <div class="table-info" id="uc-info">显示第 1 页 / 共 1 页，总计 0 条记录</div>
          <div class="table-pager">
            <button class="pager-btn" data-page="prev">上一页</button>
            <div id="uc-pager"></div>
            <button class="pager-btn" data-page="next">下一页</button>
          </div>
        </footer>
      </section>
  </main>

  <!-- 编辑弹窗 -->
    <div id="uc-modal" class="modal-mask" style="display:none;">
      <div class="modal-card" style="width:min(640px,100%);">
        <header class="modal-head">
          <h3 id="uc-modal-title">编辑用户参数</h3>
          <button class="modal-close" id="uc-modal-close" aria-label="关闭">×</button>
        </header>
        <div class="modal-body">
          <form id="uc-form">
            <div class="form-grid" style="grid-template-columns:repeat(2,minmax(0,1fr));gap:12px;">
              <label class="modal-field"><span>ID</span><input id="uc-id" type="text" readonly /></label>
              <label class="modal-field"><span>昵称</span><input id="uc-nickname" type="text" placeholder="昵称" /></label>
              <label class="modal-field"><span>邮箱</span><input id="uc-email" type="email" placeholder="邮箱" /></label>
              <label class="modal-field"><span>性别</span>
                <select id="uc-gender" class="select">
                  <option value="male">男</option>
                  <option value="female">女</option>
                  <option value="other">未知</option>
                </select>
              </label>
              <label class="modal-field"><span>会员等级</span>
                <select id="uc-level" class="select">
                  <option value="none">普通</option>
                  <option value="purple">紫晶</option>
                  <option value="crown">皇冠</option>
                </select>
              </label>
              <label class="modal-field"><span>人气值</span><input id="uc-popularity" type="number" min="0" step="1" /></label>
              <label class="modal-field"><span>幸运星数值</span><input id="uc-lucky" type="number" min="0" step="1" /></label>
              <label class="modal-field full"><span>头像地址(URL)</span><input id="uc-avatar" type="url" placeholder="https://..." /></label>
              <div class="modal-field full">
                <span>授权快捷内容</span>
                <button type="button" id="uc-quick-toggle" class="switch" aria-label="快捷内容开关"><span class="switch-handle"></span></button>
              </div>
            </div>
          </form>
          <p class="tips" style="margin-top:8px;color:#475569;">说明：幸运星数值可人工覆盖；若留空则保留原值。</p>
        </div>
        <footer class="modal-foot">
          <button class="panel-btn" id="uc-modal-cancel" type="button">取消</button>
          <button class="panel-btn primary" id="uc-modal-submit" type="button">保存</button>
        </footer>
      </div>
    </div>

    <!-- 新增弹窗 -->
    <div id="uc-add-modal" class="modal-mask" style="display:none;">
      <div class="modal-card" style="width:min(640px,100%);">
        <header class="modal-head">
          <h3>新增用户</h3>
          <button class="modal-close" id="uc-add-close" aria-label="关闭">×</button>
        </header>
        <div class="modal-body">
          <form id="uc-add-form">
            <div class="form-grid" style="grid-template-columns:repeat(2,minmax(0,1fr));gap:12px;">
              <label class="modal-field"><span>昵称 (可选)</span><input id="uc-add-nickname" type="text" placeholder="昵称" /></label>
              <label class="modal-field"><span>邮箱 (必填或自动生成)</span><input id="uc-add-email" type="email" placeholder="user@example.com" /></label>
              <label class="modal-field"><span>性别</span>
                <select id="uc-add-gender" class="select">
                  <option value="male">男</option>
                  <option value="female">女</option>
                  <option value="other" selected>未知</option>
                </select>
              </label>
              <label class="modal-field"><span>会员等级</span>
                <select id="uc-add-level" class="select">
                  <option value="none">普通</option>
                  <option value="purple">紫晶</option>
                  <option value="crown">皇冠</option>
                </select>
              </label>
              <label class="modal-field"><span>人气值</span><input id="uc-add-popularity" type="number" min="0" step="1" value="0" /></label>
              <label class="modal-field"><span>幸运星数值</span><input id="uc-add-lucky" type="number" min="0" step="1" value="0" /></label>
              <label class="modal-field full"><span>头像地址(URL)</span><input id="uc-add-avatar" type="url" placeholder="https://..." /></label>
              <div class="modal-field full"><span>授权快捷内容</span><button type="button" id="uc-add-quick" class="switch" aria-label="快捷内容开关"><span class="switch-handle"></span></button></div>
            </div>
          </form>
          <p class="tips" style="margin-top:8px;color:#475569;">邮箱留空将自动生成（演示环境）。</p>
        </div>
        <footer class="modal-foot">
          <button class="panel-btn" id="uc-add-cancel" type="button">取消</button>
          <button class="panel-btn primary" id="uc-add-submit" type="button">创建</button>
        </footer>
      </div>
    </div>

    <style>
      /* Modal overlay + card (ensure true popup instead of inline block) */
      .modal-mask{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(15,23,42,.45);z-index:1000;padding:16px}
      .modal-card{background:var(--card-bg,#fff);border-radius:12px;box-shadow:0 30px 70px rgba(15,23,42,.3);overflow:auto;max-height:90vh}
      .modal-head{display:flex;align-items:center;justify-content:space-between;padding:16px 18px;border-bottom:1px solid var(--border)}
      .modal-foot{display:flex;gap:8px;justify-content:flex-end;padding:12px 18px;border-top:1px solid var(--border)}
      .modal-body{padding:14px 18px}
      .modal-close{background:transparent;border:none;font-size:20px;line-height:1;cursor:pointer;color:#64748b}
      .form-grid{display:grid}
      .modal-field{display:flex;flex-direction:column;gap:6px}
      .modal-field>span{font-size:12px;color:#475569}
      .member-avatar,.uc-avatar{width:36px;height:36px;border-radius:50%;object-fit:cover;border:1px solid var(--border);box-shadow:0 1px 2px rgba(0,0,0,.08)}
      .switch{position:relative;display:inline-flex;width:42px;height:22px;border-radius:999px;background:#cbd5e1;cursor:pointer;align-items:center;transition:.25s all}
      .switch.on{background:#4f46e5}
      .switch-handle{position:absolute;left:3px;top:3px;width:16px;height:16px;background:#fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.15);transition:.25s all}
      .switch.on .switch-handle{left:23px}
      .table-actions{display:flex;gap:6px}
      .action-btn{border:none;background:rgba(241,245,249,.8);width:28px;height:28px;display:grid;place-items:center;border-radius:8px;cursor:pointer;color:#334155}
      .action-btn.edit{color:#2563eb}
      .action-btn.delete{color:#dc2626}
      .action-btn:hover{background:#f1f5f9}
      .modal-field.full{grid-column:1 / -1}
    </style>
  <script type="module" src="/admin/static/perm-guard.js"></script>
  <script type="module" src="/admin/frontend-user-config.js"></script>
  </body>
</html>
