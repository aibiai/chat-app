<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>点卡审核 - 订单管理</title>
    <link rel="stylesheet" href="/admin/static/styles.css" />
  </head>
  <body class="admin-layout">
    <style>
      /* 缩略图与预览样式（与身份审核保持一致风格） */
      .thumb-64 {
        width: 64px;
        height: 64px;
        object-fit: cover;
        border-radius: 8px;
        border: 1px solid #e5e7eb;
        background: #fff;
        box-shadow: 0 2px 6px rgba(0,0,0,.06);
        cursor: zoom-in;
      }
      .thumb-64:hover { box-shadow: 0 4px 14px rgba(0,0,0,.25); transform: translateY(-2px); transition: all .18s ease; }
      .img-viewer{ position:fixed; inset:0; z-index:10050; display:none; align-items:center; justify-content:center; }
      .img-viewer.open{ display:flex; }
      .img-viewer .backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.6); }
      .img-viewer .viewer-body{ position:relative; max-width:92vw; max-height:90vh; display:flex; align-items:center; justify-content:center; }
      .img-viewer img{ max-width:92vw; max-height:90vh; object-fit:contain; border-radius:10px; box-shadow:0 12px 36px rgba(0,0,0,.35); background:#fff; }
      .img-viewer .close{ position:absolute; top:-12px; right:-12px; width:34px; height:34px; border-radius:50%; border:1px solid rgba(255,255,255,.65); background:rgba(255,255,255,.9); color:#111; font-weight:800; cursor:pointer; box-shadow:0 6px 18px rgba(0,0,0,.25); }
  .img-viewer .nav-btn{ position:absolute; top:50%; transform:translateY(-50%); width:40px; height:40px; border-radius:50%; border:none; background:rgba(255,255,255,.9); color:#111; font-size:24px; line-height:1; cursor:pointer; box-shadow:0 6px 18px rgba(0,0,0,.25); display:flex; align-items:center; justify-content:center; }
  .img-viewer .nav-btn.prev{ left:-56px; }
  .img-viewer .nav-btn.next{ right:-56px; }
    </style>
    <aside class="admin-sidebar">
      <div class="sidebar-top">
        <div class="sidebar-logo">
          <span class="logo-dot"></span>
          <strong>控制台</strong>
        </div>
        <div class="sidebar-profile">
          <div class="sidebar-avatar" id="sidebar-avatar">A</div>
          <div>
            <p id="admin-name" class="sidebar-name">管理员</p>
            <span class="sidebar-status">在线</span>
          </div>
        </div>
      </div>
      <nav class="admin-nav">
        <a class="nav-item" href="/admin/dashboard">
          <span>控制台</span>
          <small class="nav-tag hot">HOT</small>
        </a>
        <details class="nav-group">
          <summary class="nav-item"><span>基础管理</span></summary>
          <div class="nav-sub">
            <a class="nav-sub-item" href="/admin/profile">个人资料</a>
            <a class="nav-sub-item" href="#">项目设置</a>
            <a class="nav-sub-item" href="#">内容管理</a>
          </div>
        </details>
        <details class="nav-group">
          <summary class="nav-item"><span>信息审核</span></summary>
          <div class="nav-sub">
            <a class="nav-sub-item" href="/admin/attachments">附件审核</a>
            <a class="nav-sub-item" href="/admin/avatar-review">头像审核</a>
            <a class="nav-sub-item" href="/admin/identity-review">身份审核</a>
            <a class="nav-sub-item" href="/admin/confession-review">表白墙审核</a>
          </div>
        </details>
        <details class="nav-group">
          <summary class="nav-item"><span>权限管理</span></summary>
          <div class="nav-sub">
            <a class="nav-sub-item" href="/admin/admins">管理员列表</a>
            <a class="nav-sub-item" href="/admin/admin-logs">管理员日志</a>
            <a class="nav-sub-item" href="/admin/roles">角色管理</a>
            <a class="nav-sub-item" href="/admin/rules">菜单规则</a>
          </div>
        </details>
        <details class="nav-group">
          <summary class="nav-item"><span>即时通讯</span></summary>
          <div class="nav-sub">
            <a class="nav-sub-item" href="/admin/push">推送消息</a>
            <a class="nav-sub-item" href="/admin/service-accounts">服务号管理</a>
          </div>
        </details>
        <details class="nav-group">
          <summary class="nav-item"><span>会员管理</span></summary>
          <div class="nav-sub">
            <a class="nav-sub-item" href="/admin/members">会员列表</a>
            <a class="nav-sub-item" href="/admin/customer-service">客服管理</a>
            <a class="nav-sub-item" href="/admin/member-upgrade">会员升级</a>
          </div>
        </details>
        <details class="nav-group">
          <summary class="nav-item"><span>礼物中心</span></summary>
          <div class="nav-sub">
            <a class="nav-sub-item" href="/admin/gift-categories">礼物分类</a>
            <a class="nav-sub-item" href="/admin/gifts">礼物管理</a>
          </div>
        </details>
        <a class="nav-item" href="/admin/stickers"><span>贴纸素材</span></a>
        <details class="nav-group open">
          <summary class="nav-item"><span>订单管理</span></summary>
          <div class="nav-sub">
            <a class="nav-sub-item" href="/admin/order-overview">总营业额</a>
            <a class="nav-sub-item" href="/admin/recharge-records">充值记录</a>
            <a class="nav-sub-item" href="/admin/coin-consumption">金币消费记录</a>
            <a class="nav-sub-item active" href="/admin/card-review">点卡审核</a>
          </div>
        </details>
        <details class="nav-group">
          <summary class="nav-item"><span>前端配置</span></summary>
          <div class="nav-sub">
            <a class="nav-sub-item" href="/admin/frontend-terms">使用条款</a>
            <a class="nav-sub-item" href="/admin/frontend-privacy">隐私政策</a>
            <a class="nav-sub-item" href="/admin/frontend-security">安全中心</a>
            <a class="nav-sub-item" href="/admin/frontend-help">帮助中心</a>
            <a class="nav-sub-item" href="/admin/frontend-contact">联系我们</a>
            <a class="nav-sub-item" href="/admin/frontend-user-config">用户配置</a>
            <a class="nav-sub-item" href="/admin/frontend-card-redeem">点卡兑换说明</a>
            <a class="nav-sub-item" href="/admin/frontend-confession-images">表白墙图片</a>
          </div>
        </details>
      </nav>
      <button type="button" class="logout-btn" id="logout-btn">退出登录</button>
    </aside>

    <main class="admin-main members-compact">
      <header class="admin-topbar">
        <div>
          <h1>点卡审核</h1>
          <p class="topbar-subtitle">查看用户上传的点卡兑换凭证，并进行通过或驳回操作。</p>
        </div>
        <div class="topbar-actions">
          <label class="search-box">
            <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
              <path
                fill="currentColor"
                d="M15.5 14h-.79l-.28-.27A6.5 6.5 0 1 0 9.5 16a6.48 6.48 0 0 0 4.23-1.57l.27.28v.79l5 5L20.5 19l-5-5Zm-6 0A4.5 4.5 0 1 1 14 9.5 4.5 4.5 0 0 1 9.5 14Z"
              />
            </svg>
            <input type="search" id="card-search" placeholder="搜索用户名 / Email" />
          </label>
          <div class="view-switch">
            <button class="topbar-icon" id="card-refresh" aria-label="刷新">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                <path d="M17.65 6.35A7.95 7.95 0 0 0 12 4V1L7 6l5 5V7a5 5 0 1 1-5 5H5a7 7 0 1 0 12.65-5.65Z" />
              </svg>
            </button>
          </div>
        </div>
      </header>

      <section class="panel members-compact">
        <header class="panel-head">
          <div class="panel-actions">
            <button class="panel-btn danger" id="card-delete">删除</button>
            <button class="panel-btn" id="card-more">更多</button>
          </div>
          <div class="panel-filters">
            <label class="filter-item">
              <span>审核状态</span>
              <select id="card-status-filter">
                <option value="all">全部</option>
                <option value="pending">待审核</option>
                <option value="approved">已通过</option>
                <option value="rejected">已驳回</option>
              </select>
            </label>
          </div>
        </header>

        <div class="table-wrapper">
          <table class="data-table" id="card-table">
            <thead>
              <tr>
                <th><input type="checkbox" id="card-check-all" /></th>
                <th>ID</th>
                <th>头像</th>
                <th>用户昵称</th>
                <th>Email</th>
                <th>性别</th>
                <th>会员等级</th>
                <th>点卡图片1</th>
                <th>点卡图片2</th>
                <th>点卡图片3</th>
                <th>点卡图片4</th>
                <th>状态</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody>
              <tr><td colspan="13" class="empty">加载中...</td></tr>
            </tbody>
          </table>
        </div>

        <footer class="table-foot">
          <div class="table-info" id="card-info">显示第 1 页 / 共 1 页，总计 0 条记录</div>
          <div class="table-pager">
            <button class="pager-btn" data-page="prev">上一页</button>
            <div id="card-pager"></div>
            <button class="pager-btn" data-page="next">下一页</button>
            <label class="pager-size">
              每页显示
              <select id="card-page-size">
                <option value="10">10 条</option>
                <option value="20">20 条</option>
                <option value="50">50 条</option>
              </select>
            </label>
          </div>
        </footer>
        <!-- 图片预览容器 -->
        <div class="img-viewer" id="img-viewer" aria-hidden="true">
          <div class="backdrop" data-action="close"></div>
          <div class="viewer-body">
            <img id="img-viewer-img" alt="预览" />
            <button class="nav-btn prev" id="img-viewer-prev" aria-label="上一张" title="上一张">‹</button>
            <button class="nav-btn next" id="img-viewer-next" aria-label="下一张" title="下一张">›</button>
            <button class="close" data-action="close" title="关闭">×</button>
          </div>
        </div>
      </section>
    </main>

  <script type="module" src="/admin/static/perm-guard.js"></script>
  <script type="module" src="/admin/card-review.js"></script>
  </body>
</html>
