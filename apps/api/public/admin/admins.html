<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>&#31649;&#29702;&#21592;&#31649;&#29702; - &#26435;&#38480;&#31649;&#29702;</title>
    <link rel="stylesheet" href="/admin/static/styles.css" />
  </head>
  <body class="admin-layout">
    <aside class="admin-sidebar">
      <div class="sidebar-top">
        <div class="sidebar-logo">
          <span class="logo-dot"></span>
          <strong>&#25511;&#21046;&#21488;</strong>
        </div>
        <div class="sidebar-profile">
          <div class="sidebar-avatar" id="sidebar-avatar">A</div>
          <div>
            <p id="admin-name" class="sidebar-name">&#31649;&#29702;&#21592;</p>
            <span class="sidebar-status">&#22312;&#32447;</span>
          </div>
        </div>
      </div>
            <nav class="admin-nav">
        <a class="nav-item" href="/admin/dashboard">
          <span>控制台</span>
          <small class="nav-tag hot">HOT</small>
        </a>
        <details class="nav-group">
          <summary class="nav-item">
            <span>常规管理</span>
          </summary>
          <div class="nav-sub">
            <a class="nav-sub-item" href="/admin/profile">个人资料</a>
            <a class="nav-sub-item" href="#">栏目配置</a>
            <a class="nav-sub-item" href="#">缓存清理</a>
          </div>
        </details>
        <details class="nav-group">
          <summary class="nav-item">
            <span>信息审核</span>
          </summary>
          <div class="nav-sub">
            <a class="nav-sub-item" href="/admin/attachments">附件审核</a>
            <a class="nav-sub-item" href="/admin/avatar-review">头像审核</a>
            <a class="nav-sub-item" href="/admin/identity-review">身份审核</a>
            <a class="nav-sub-item" href="/admin/confession-review">表白墙审核</a>
          </div>
        </details>
        <details class="nav-group open">
          <summary class="nav-item">
            <span>权限管理</span>
          </summary>
          <div class="nav-sub">
            <a class="nav-sub-item active" href="/admin/admins">管理员管理</a>
            <a class="nav-sub-item" href="/admin/admin-logs">管理员日志</a>
            <a class="nav-sub-item" href="/admin/roles">角色组</a>
            <a class="nav-sub-item" href="/admin/rules">菜单规则</a>
          </div>
        </details>
        <details class="nav-group">
          <summary class="nav-item">
            <span>即时通信管理</span>
          </summary>
          <div class="nav-sub">
            <a class="nav-sub-item" href="/admin/push">推送消息</a>
            <a class="nav-sub-item" href="/admin/service-accounts">服务账号管理</a>
          </div>
        </details>
        <details class="nav-group">
          <summary class="nav-item">
            <span>会员管理</span>
          </summary>
          <div class="nav-sub">
            <a class="nav-sub-item" href="/admin/members">会员管理</a>
            <a class="nav-sub-item" href="/admin/customer-service">客服管理</a>
            <a class="nav-sub-item" href="/admin/member-upgrade">升级会员</a>
          </div>
        </details>
        <details class="nav-group">
          <summary class="nav-item">
            <span>礼物管理</span>
          </summary>
          <div class="nav-sub">
            <a class="nav-sub-item" href="/admin/gift-categories">礼物分类</a>
            <a class="nav-sub-item" href="/admin/gifts">礼物管理</a>
          </div>
        </details>
        <a class="nav-item" href="/admin/stickers">
          <span>表情贴管理</span>
        </a>
        <details class="nav-group">
          <summary class="nav-item">
            <span>订单管理</span>
          </summary>
          <div class="nav-sub">
            <a class="nav-sub-item" href="/admin/order-overview">总营业额</a>
            <a class="nav-sub-item" href="/admin/recharge-records">充值记录</a>
            <a class="nav-sub-item" href="/admin/coin-consumption">金币消费记录</a>
            <a class="nav-sub-item" href="/admin/card-review">点卡审核</a>
          </div>
        </details>
        <details class="nav-group">
          <summary class="nav-item">
            <span>前端管理</span>
          </summary>
          <div class="nav-sub">
            <a class="nav-sub-item" href="/admin/frontend-terms">使用条款修改</a>
            <a class="nav-sub-item" href="/admin/frontend-privacy">隐私条款修改</a>
            <a class="nav-sub-item" href="/admin/frontend-security">交友安全修改</a>
            <a class="nav-sub-item" href="/admin/frontend-help">帮助中心修改</a>
            <a class="nav-sub-item" href="/admin/frontend-contact">联系我们修改</a>
            <a class="nav-sub-item" href="/admin/frontend-user-config">用户参数修改</a>
            <a class="nav-sub-item" href="/admin/frontend-card-redeem">点卡兑换内容修改</a>
            <a class="nav-sub-item" href="/admin/frontend-confession-images">表白墙图片修改</a>
          </div>
        </details>

      </nav>
      <button type="button" class="logout-btn" id="logout-btn">&#36864;&#20986;&#30331;&#24405;</button>
    </aside>

    <main class="admin-main members-compact">
      <header class="admin-topbar">
        <div>
          <h1>&#31649;&#29702;&#21592;&#31649;&#29702;</h1>
          <p class="topbar-subtitle">
            &#32479;&#19968;&#31649;&#29702;&#24179;&#21488;&#31649;&#29702;&#21592;&#36134;&#21495;&#65292;&#20445;&#25345;&#35282;&#33394;&#32452;&#37197;&#32622;&#19982;&#29366;&#24577;&#21512;&#29702;&#12290;
          </p>
        </div>
        <div class="topbar-actions">
          <label class="search-box">
            <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
              <path fill="currentColor" d="M15.5 14h-.79l-.28-.27A6.5 6.5 0 1 0 9.5 16a6.48 6.48 0 0 0 4.23-1.57l.27.28v.79l5 5L20.5 19l-5-5Zm-6 0A4.5 4.5 0 1 1 14 9.5 4.5 4.5 0 0 1 9.5 14Z"/>
            </svg>
            <input type="search" id="admin-search" placeholder="&#25628;&#32034;&#29992;&#25143;&#21517; / &#32844;&#21153;&#32452; / Email" />
          </label>
          <div class="view-switch">
            <select id="status-filter" class="filter-select">
              <option value="all">&#20840;&#37096;&#29366;&#24577;</option>
              <option value="active">&#27491;&#24120;</option>
              <option value="disabled">&#24050;&#31105;&#29992;</option>
            </select>
          </div>
        </div>
      </header>

      <section class="panel members-compact">
        <header class="panel-head">
          <div class="panel-actions">
            <button class="panel-btn primary" id="admins-add">+ &#22686;&#21152;</button>
            <button class="panel-btn" id="admins-edit">&#32534;&#36753;</button>
            <button class="panel-btn danger" id="admins-delete">&#21024;&#38500;</button>
            <button class="panel-btn" id="admins-refresh-perm">刷新权限</button>
          </div>
        </header>

        <div class="table-wrapper">
          <table class="data-table" id="admins-table">
            <thead>
              <tr>
                <th><input type="checkbox" id="admins-check-all" /></th>
                <th>ID</th>
                <th>&#30331;&#24405;&#21517;</th>
                <th>&#26165;&#31216;</th>
                <th>&#25152;&#23646;&#32452;</th>
                <th>Email</th>
                <th>&#29366;&#24577;</th>
                <th>&#26368;&#36817;&#30331;&#24405;</th>
                <th>&#25805;&#20316;</th>
              </tr>
            </thead>
            <tbody>
              <tr><td colspan="9" class="empty">&#21152;&#36733;&#20013;...</td></tr>
            </tbody>
          </table>
        </div>

        <footer class="table-foot">
          <div class="table-info" id="admins-info">
            &#26174;&#31034;&#31532;&nbsp;1&nbsp;&#39029;&nbsp;/&nbsp;&#20849;&nbsp;1&nbsp;&#39029;&#65292;&#24635;&#35745;&nbsp;0&nbsp;&#26465;&#35760;&#24405;
          </div>
          <div class="table-pager">
            <button class="pager-btn" data-page="prev">&#19978;&#19968;&#39029;</button>
            <div id="admins-pager"></div>
            <button class="pager-btn" data-page="next">&#19979;&#19968;&#39029;</button>
            <label class="pager-size">
              &#27599;&#39029;&#23637;&#31034
              <select id="admins-page-size">
                <option value="10">10 &#26465;</option>
                <option value="20">20 &#26465;</option>
                <option value="50">50 &#26465;</option>
              </select>
            </label>
          </div>
        </footer>
      </section>
    </main>

    <!-- 管理员新增/编辑弹窗 -->
    <div id="admin-modal" class="modal-mask" style="display:none;">
      <div class="modal-card">
        <header class="modal-head">
          <h3 id="admin-modal-title">添加管理员</h3>
          <button class="modal-close" id="admin-modal-close" aria-label="关闭">×</button>
        </header>
        <div class="modal-body">
          <form id="admin-form">
            <label class="modal-field">
              <span>所属组别</span>
              <select id="admin-role" class="select" aria-label="角色组下拉">
                <option value="">请选择角色组</option>
              </select>
            </label>

            <label class="modal-field">
              <span>用户名</span>
              <input id="admin-username" type="text" placeholder="请输入登录名" required />
            </label>

            <label class="modal-field">
              <span>Email</span>
              <input id="admin-email" type="email" placeholder="请输入邮箱" />
            </label>

            <label class="modal-field">
              <span>昵称</span>
              <input id="admin-nickname" type="text" placeholder="请输入昵称" />
            </label>

            <label class="modal-field">
              <span>密码</span>
              <input id="admin-password" type="password" placeholder="编辑时留空表示不修改" />
            </label>

            <div class="modal-field">
              <span>状态</span>
              <div class="radio-row">
                <label><input type="radio" name="admin-status" value="active" checked /> 正常</label>
                <label><input type="radio" name="admin-status" value="disabled" /> 禁用</label>
              </div>
            </div>
          </form>
        </div>
        <footer class="modal-foot">
          <button class="panel-btn" id="admin-modal-reset" type="button">重置</button>
          <button class="panel-btn primary" id="admin-modal-submit" type="button">确定</button>
        </footer>
      </div>
    </div>

    <style>
      /* 轻量模态与字段布局，复用角色组页面风格 */
      .modal-mask{position:fixed;inset:0;background:rgba(15,23,42,.45);display:flex;align-items:center;justify-content:center;z-index:2000;padding:16px}
      .modal-card{width:min(760px,100%);background:#fff;border:1px solid var(--border);border-radius:14px;box-shadow:0 24px 60px rgba(15,23,42,.18);display:grid;grid-template-rows:auto 1fr auto;max-height:88vh;overflow:hidden}
      .modal-head{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid rgba(226,232,240,.8);background:linear-gradient(135deg,rgba(59,130,246,.08),rgba(236,72,153,.06))}
      .modal-head h3{margin:0;font-weight:500;font-size:14px}
      .modal-close{border:none;background:transparent;font-size:20px;line-height:1;cursor:pointer;color:#64748b}
      .modal-body{padding:18px 16px;overflow:auto;min-height:0}
      .modal-field{display:grid;gap:8px;margin:10px 0}
      .modal-field>span{font-size:12px;color:#1f2937;font-weight:600}
      .modal-field input, .modal-field select{padding:10px 12px;border-radius:12px;border:1px solid rgba(148,163,184,.35);background:rgba(255,255,255,.96)}
      .radio-row{display:flex;gap:16px;align-items:center}
      .modal-foot{display:flex;justify-content:center;align-items:center;gap:18px;padding:14px 16px;border-top:1px solid rgba(226,232,240,.8);background:linear-gradient(135deg,rgba(248,250,252,.85),rgba(241,245,249,.85))}
      .group-grid{display:none}
      .group-item{display:none}
    </style>

    <script type="module" src="/admin/static/perm-guard.js"></script>
    <script type="module" src="/admin/admins.js"></script>
  </body>
</html>

